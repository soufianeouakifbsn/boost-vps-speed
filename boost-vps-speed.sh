#!/bin/bash
echo "ðŸš€ ØªØ­Ø³ÙŠÙ† Ø´Ø§Ù…Ù„ Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø´Ø¨ÙƒØ© Ù„ØªØ³Ø±ÙŠØ¹ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙˆÙ…Ù†Ø¹ Ø§Ø®ØªÙ†Ø§Ù‚ UDP! âš¡"

# Ø¶Ø¨Ø· TCP Vegas Ùˆ HyStart++ Ù„ØªØ­Ù‚ÙŠÙ‚ Ø£Ø¹Ù„Ù‰ Ø§Ø³ØªÙ‚Ø±Ø§Ø±
echo "ðŸ”¥ Ø¶Ø¨Ø· TCP Vegas Ù…Ø¹ HyStart++ Ù„Ø¶Ù…Ø§Ù† Ø§ØªØµØ§Ù„ Ø³Ù„Ø³!"
cat > /etc/sysctl.conf <<EOF
net.ipv4.tcp_congestion_control = vegas

# ØªØ­Ø³ÙŠÙ† Vegas Ù„Ù…Ù†Ø¹ Ø§Ù„Ø§Ø®ØªÙ†Ø§Ù‚ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
net.ipv4.tcp_vegas_alpha = 3
net.ipv4.tcp_vegas_beta = 6
net.ipv4.tcp_vegas_gamma = 2

# ØªÙ…ÙƒÙŠÙ† HyStart++ Ù„Ù…Ù†Ø¹ Ø§Ù†Ø®ÙØ§Ø¶ Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø£Ùˆ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
net.ipv4.tcp_hystart_allow_burst = 1
net.ipv4.tcp_hystart_detect = 1
net.ipv4.tcp_hystart_low_window = 32
net.ipv4.tcp_hystart_plus = 1

# ØªØ­Ø³ÙŠÙ† Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø±ÙˆØ± Ø¹Ø¨Ø± TCP/UDP Ù„ØªÙ‚Ù„ÙŠÙ„ Ø²Ù…Ù† Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙˆØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØ¯ÙÙ‚
net.ipv4.tcp_mtu_probing = 1
net.ipv4.tcp_fastopen = 3
net.ipv4.tcp_nodelay = 1

# Ø¶Ø¨Ø· TCP Window Scaling Ù„Ø¶Ù…Ø§Ù† Ø³Ø±Ø¹Ø© Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø¹Ø§Ù„ÙŠØ©
net.ipv4.tcp_window_scaling = 1
net.ipv4.tcp_adv_win_scale = 2

# ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¹Ø¨Ø± UDP Ù„Ù…Ù†Ø¹ ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ø®ØªÙ†Ø§Ù‚ Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ù…Ø¤Ù‚Øª
net.ipv4.udp_rmem_max = 34359738368
net.ipv4.udp_wmem_max = 34359738368
net.ipv4.udp_so_reuseport = 1
EOF

sysctl -p

# ØªØ­Ø³ÙŠÙ† QoS Ù„Ø¶Ù…Ø§Ù† ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙÙˆØ± Ø§Ù„Ø¶ØºØ· Ø¹Ù„ÙŠÙ‡ ÙˆÙ…Ù†Ø¹ Ø§Ù„ØªÙ‚Ø·Ø¹ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„
echo "ðŸ”¥ Ø¶Ø¨Ø· QoS Ù„Ø¬Ø¹Ù„ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙˆØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙƒØ«Ø± Ø³Ù„Ø§Ø³Ø©!"
tc qdisc replace dev eth0 root fq_codel quantum 12000

# Ø¶Ø¨Ø· Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø´Ø¨ÙƒØ© Ù„ØªØ­Ù‚ÙŠÙ‚ Ø£Ù‚ØµÙ‰ Ø£Ø¯Ø§Ø¡ ÙˆÙ…Ù†Ø¹ Ø§Ù„Ø§Ø®ØªÙ†Ø§Ù‚
echo "ðŸ”§ Ø¶Ø¨Ø· Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø´Ø¨ÙƒØ© Ù„Ø¶Ù…Ø§Ù† Ø§Ø³ØªØ¬Ø§Ø¨Ø© ÙØ§Ø¦Ù‚Ø© Ø§Ù„Ø³Ø±Ø¹Ø©!"
IFACE="eth0"
ethtool -G $IFACE rx 512 tx 512
ethtool -C $IFACE rx-usecs 64 tx-usecs 64
ethtool -s $IFACE speed 10000 duplex full autoneg off
ethtool -K $IFACE gro on lro on

# Ø¶Ø¨Ø· `txqueuelen` Ù„Ø¶Ù…Ø§Ù† ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙÙˆØ± Ø§Ù„Ø¶ØºØ· Ø¹Ù„ÙŠÙ‡ ÙˆÙ…Ù†Ø¹ Ø£ÙŠ ØªØ£Ø®ÙŠØ± ÙÙŠ UDP
echo "âš¡ Ø¶Ø¨Ø· txqueuelen Ù„Ø¬Ø¹Ù„ ØªØ¯ÙÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³ØªÙ‚Ø±Ù‹Ø§ ØªÙ…Ø§Ù…Ù‹Ø§!"
ifconfig eth0 txqueuelen 1500000

echo "âœ… ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª! ðŸš€ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙˆØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ø¨Ø± UDP Ø³Ù„Ø³Ù‹Ø§ Ø¨Ø¯ÙˆÙ† Ø£ÙŠ Ø§Ø®ØªÙ†Ø§Ù‚!"
echo "ðŸ“¢ ÙŠÙÙØ¶Ù„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙŠØ±ÙØ± Ù„Ø¶Ù…Ø§Ù† Ø£ÙØ¶Ù„ ØªØ¬Ø±Ø¨Ø©."
